build:
  gpu: true
  system_packages:
    - "libgl1-mesa-glx"
    - "libglib2.0-0"
  python_version: "3.8"
  python_packages:
    - "Flask==2.1.0"
    - "Flask-Cors==3.0.9"
    - "Flask-RESTful==0.3.8"
    - "flax==0.5.0"
  run:
    #   Ideally, these packages would by in python_packages, but I threw them all in run to fix an implicit dependency on torch already being there
    - "pip install --upgrade \"jax[cuda]\" -f https://storage.googleapis.com/jax-releases/jax_releases.html"
    - "git clone https://github.com/borisdayma/dalle-mini.git && cd dalle-mini && pip install -e . && cd .."
    - "git clone https://github.com/patil-suraj/vqgan-jax.git && cd vqgan-jax && pip install -e . && cd .."
    - "git clone https://github.com/huggingface/transformers.git && cd transformers && pip install -e . && cd .."
predict: "predict.py:Predictor"
image: "r8.im/nicholascelestin/dalle-mega"



